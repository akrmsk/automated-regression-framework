# --- Server Port ---
# Run this worker on a different port so it doesn't conflict with the API
server.port=8081

# --- RabbitMQ Connection ---
# We must provide the correct username and password
spring.rabbitmq.host=rabbitmq
spring.rabbitmq.port=5672
spring.rabbitmq.username=user
spring.rabbitmq.password=password

# --- NEW: STARTUP RETRY ---
# This makes the worker wait if RabbitMQ is not ready yet.
# This fixes the "UnknownHostException: rabbitmq" on startup.
spring.rabbitmq.listener.simple.retry.enabled=true
spring.rabbitmq.listener.simple.retry.max-attempts=10
spring.rabbitmq.listener.simple.retry.initial-interval=10s
spring.rabbitmq.listener.simple.retry.multiplier=1.5

# --- RabbitMQ Topology ---
# The queue name for the @RabbitListener
rabbitmq.queue.name=test_run_jobs_queue
rabbitmq.exchange.name=test_run_exchange
rabbitmq.routing.key=test_run_jobs_key

# --- Dead-Letter Queue (DLQ) Configuration ---
rabbitmq.dlq.name=test_run_jobs_dlq
rabbitmq.dlx.name=test_run_dlx
rabbitmq.dlq.routing.key=test_run_dlq_key

# --- API Configuration ---
# The base URL for RestTemplate to call the API
api.base.url=http://api:8080

# --- Selenium Configuration ---
selenium.hub.url=${SELENIUM_HUB_URL}